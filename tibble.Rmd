# Tibbles

## Introduction

```{r message=FALSE}
library("tidyverse")
```

## Creating Tibbles

No exercises

## Tibbles vs. data.frame

No exercises

## Subsetting

No exercises

## Interacting with older code

No exercises

## Exercises

### Exercise <span class="exercise-number">10.6.1</span> {.unnumbered .exercise}

`r BeginQuestion()`
How can you tell if an object is a tibble? (Hint: try printing `mtcars`, which is a regular data frame).
`r EndQuestion()`

`r BeginAnswer()`

```{r}
mtcars
```

```{r}
class(mtcars)
```

```{r}
class(as_tibble(mtcars))
```

Tibbles will only print out a limited number of rows and show the class on top of each column. Additionally, tibbles have class `"tbl_df"` and `"tbl_"` in addition to `"data.frame"`.

`r EndAnswer()`

### Exercise <span class="exercise-number">10.6.2</span> {.unnumbered .exercise}

`r BeginQuestion()`
Compare and contrast the following operations on a `data.frame` and equivalent tibble. What is different? Why might the default data frame behaviors cause you frustration?
`r EndQuestion()`

`r BeginAnswer()`

```{r}
df <- data.frame(abc = 1, xyz = "a")
df$x
df[, "xyz"]
df[, c("abc", "xyz")]
```

```{r}
tbl <- as_tibble(df)
tbl$x
tbl[, "xyz"]
tbl[, c("abc", "xyz")]
```

Using `$` a data.frame will partially complete the column. So even though we
wrote `df$x` it returned `df$xyz`. This saves a few keystrokes, but can result
in accidentally using a different variable than you thought you were using.

With data.frames, with `[` the type of object that is returned differs on the
number of columns. If it is one column, it won't return a data.frame, but
instead will return a vector. With more than one column, then it will return a
data.frame. This is fine if you know what you are passing in, but suppose you
did `df[ , vars]` where `vars` was a variable. Then you what that code does
depends on `length(vars)` and you'd have to write code to account for those
situations or risk bugs.

`r EndAnswer()`

### Exercise <span class="exercise-number">10.6.3</span> {.unnumbered .exercise}

`r BeginQuestion()`
If you have the name of a variable stored in an object, e.g. `var <- "mpg"`, how can you extract the reference variable from a tibble?
`r EndQuestion()`

`r BeginAnswer()`

You can use the double bracket, like `df[[var]]`. You cannot use the dollar sign, because `df$var` would look for a column named `var`.

`r EndAnswer()`

### Exercise <span class="exercise-number">10.6.4</span> {.unnumbered .exercise}

`r BeginQuestion()`

Practice referring to non-syntactic names in the following data frame by:

1.  Extracting the variable called 1.
1.  Plotting a scatterplot of 1 vs 2.
1.  Creating a new column called 3 which is 2 divided by 1.
1.  Renaming the columns to one, two and three.

`r EndQuestion()`

`r BeginAnswer()`

For this example, I'll create a dataset called annoying with
columns named `1` and `2`.


```{r}
annoying <- tibble(
  `1` = 1:10,
  `2` = `1` * 2 + rnorm(length(`1`))
)
```

1.  To extract the variable called 1 run

    ```{r}
    annoying[["1"]]
    ```

    or

    ```{r}
    annoying$`1`
    ```

1.  To create a scatter plot of `1` vs. `2` run

    ```{r}
    ggplot(annoying, aes(x = `1`, y = `2`)) +
      geom_point()
    ```

1.  To add a new column `3` which is `2` divided by `1` run

    ```{r}
    annoying[["3"]] <- annoying$`2` / annoying$`1`
    ```

    or

    ```{r}
    annoying[["3"]] <- annoying[["2"]] / annoying[["1"]]
    ```

1.  To rename the columns to `one`, `two`, and `three`, run

    ```{r}
    annoying <- rename(annoying, one = `1`, two = `2`, three = `3`)
    glimpse(annoying)
    ```

`r EndAnswer()`

### Exercise <span class="exercise-number">10.6.5</span> {.unnumbered .exercise}

`r BeginQuestion()`
What does `tibble::enframe()` do? When might you use it?
`r EndQuestion()`

`r BeginAnswer()`

The function `tibble::enframe()` converts named vectors to a data frame with names and values

```{r}
enframe(c(a = 1, b = 2, c = 3))
```

`r EndAnswer()`

### Exercise <span class="exercise-number">10.6.6</span> {.unnumbered .exercise}

`r BeginQuestion()`
What option controls how many additional column names are printed at the footer of a tibble?
`r EndQuestion()`

`r BeginAnswer()`

The help page for the `print()` method of tibble objects is discussed in `?print.tbl_df`.
The `n_extra` argument determines the number of extra columns to print information for.

`r EndAnswer()`
