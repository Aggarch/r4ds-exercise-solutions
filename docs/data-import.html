<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Exercise Solutions and Notes for R for Data Science</title>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
  <meta name="description" content="Exercise Solutions and Notes for “R for Data Science”">
  <meta name="generator" content="bookdown 0.3.6 and GitBook 2.6.7">

  <meta property="og:title" content="Exercise Solutions and Notes for R for Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="jrnold/e4qf" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Exercise Solutions and Notes for R for Data Science" />
  
  
  

<meta name="author" content="Jeffrey B. Arnold">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="tibbles.html">
<link rel="next" href="tidy-data.html">

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-0.8/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.1.0/str_view.js"></script>


<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="r4ds.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Data Science</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="visualize.html"><a href="visualize.html"><i class="fa fa-check"></i><b>1</b> Visualize</a><ul>
<li class="chapter" data-level="1.1" data-path="visualize.html"><a href="visualize.html#introduction"><i class="fa fa-check"></i><b>1.1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1.1" data-path="visualize.html"><a href="visualize.html#prerequisites"><i class="fa fa-check"></i><b>1.1.1</b> Prerequisites</a></li>
<li class="chapter" data-level="1.1.2" data-path="visualize.html"><a href="visualize.html#first-steps"><i class="fa fa-check"></i><b>1.1.2</b> First Steps</a></li>
<li class="chapter" data-level="1.1.3" data-path="visualize.html"><a href="visualize.html#aesthetic-mappings"><i class="fa fa-check"></i><b>1.1.3</b> Aesthetic mappings</a></li>
<li class="chapter" data-level="1.1.4" data-path="visualize.html"><a href="visualize.html#facets"><i class="fa fa-check"></i><b>1.1.4</b> Facets</a></li>
<li class="chapter" data-level="1.1.5" data-path="visualize.html"><a href="visualize.html#geometric-objects"><i class="fa fa-check"></i><b>1.1.5</b> Geometric Objects</a></li>
<li class="chapter" data-level="1.1.6" data-path="visualize.html"><a href="visualize.html#statistical-transformations"><i class="fa fa-check"></i><b>1.1.6</b> Statistical Transformations</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="visualize.html"><a href="visualize.html#position-adjustments"><i class="fa fa-check"></i><b>1.2</b> Position Adjustments</a></li>
<li class="chapter" data-level="1.3" data-path="visualize.html"><a href="visualize.html#coordinate-systems"><i class="fa fa-check"></i><b>1.3</b> Coordinate Systems</a><ul>
<li class="chapter" data-level="1.3.1" data-path="visualize.html"><a href="visualize.html#exercises-3"><i class="fa fa-check"></i><b>1.3.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="workflow-basics.html"><a href="workflow-basics.html"><i class="fa fa-check"></i><b>2</b> Workflow Basics</a><ul>
<li class="chapter" data-level="2.1" data-path="workflow-basics.html"><a href="workflow-basics.html#practice"><i class="fa fa-check"></i><b>2.1</b> Practice</a><ul>
<li class="chapter" data-level="2.1.1" data-path="workflow-basics.html"><a href="workflow-basics.html#exercises-4"><i class="fa fa-check"></i><b>2.1.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data Transformation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#prerequisites-1"><i class="fa fa-check"></i><b>3.1</b> Prerequisites</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#filter"><i class="fa fa-check"></i><b>3.2</b> Filter</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#exercises-5"><i class="fa fa-check"></i><b>3.3</b> Exercises</a></li>
<li class="chapter" data-level="3.4" data-path="data-transformation.html"><a href="data-transformation.html#arrange"><i class="fa fa-check"></i><b>3.4</b> Arrange</a><ul>
<li class="chapter" data-level="3.4.1" data-path="data-transformation.html"><a href="data-transformation.html#exercises-6"><i class="fa fa-check"></i><b>3.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="data-transformation.html"><a href="data-transformation.html#mutate"><i class="fa fa-check"></i><b>3.5</b> Mutate</a><ul>
<li class="chapter" data-level="3.5.1" data-path="data-transformation.html"><a href="data-transformation.html#exercises-7"><i class="fa fa-check"></i><b>3.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="data-transformation.html"><a href="data-transformation.html#grouped-summaries-with-summarise"><i class="fa fa-check"></i><b>3.6</b> Grouped summaries with <code>summarise()</code></a><ul>
<li class="chapter" data-level="3.6.1" data-path="data-transformation.html"><a href="data-transformation.html#exercises-8"><i class="fa fa-check"></i><b>3.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="data-transformation.html"><a href="data-transformation.html#grouped-mutates-and-filters"><i class="fa fa-check"></i><b>3.7</b> Grouped mutates and filters</a><ul>
<li class="chapter" data-level="3.7.1" data-path="data-transformation.html"><a href="data-transformation.html#exercises-9"><i class="fa fa-check"></i><b>3.7.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html"><i class="fa fa-check"></i><b>4</b> Exploratory Data Analysis</a><ul>
<li class="chapter" data-level="4.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a><ul>
<li class="chapter" data-level="4.1.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#questions"><i class="fa fa-check"></i><b>4.1.1</b> Questions</a></li>
<li class="chapter" data-level="4.1.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#variation"><i class="fa fa-check"></i><b>4.1.2</b> Variation</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#missing-values"><i class="fa fa-check"></i><b>4.2</b> Missing Values</a><ul>
<li class="chapter" data-level="4.2.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#exercises-11"><i class="fa fa-check"></i><b>4.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#covariation"><i class="fa fa-check"></i><b>4.3</b> Covariation</a><ul>
<li class="chapter" data-level="4.3.1" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#a-categorical-and-continuous-variable"><i class="fa fa-check"></i><b>4.3.1</b> A categorical and continuous variable</a></li>
<li class="chapter" data-level="4.3.2" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-categorical-variables"><i class="fa fa-check"></i><b>4.3.2</b> Two categorical variables</a></li>
<li class="chapter" data-level="4.3.3" data-path="exploratory-data-analysis.html"><a href="exploratory-data-analysis.html#two-continuous-variables"><i class="fa fa-check"></i><b>4.3.3</b> Two continuous variables</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tibbles.html"><a href="tibbles.html"><i class="fa fa-check"></i><b>5</b> Tibbles</a><ul>
<li class="chapter" data-level="5.1" data-path="tibbles.html"><a href="tibbles.html#prerquisites"><i class="fa fa-check"></i><b>5.1</b> Prerquisites</a></li>
<li class="chapter" data-level="5.2" data-path="tibbles.html"><a href="tibbles.html#creating-tibbles"><i class="fa fa-check"></i><b>5.2</b> Creating Tibbles</a></li>
<li class="chapter" data-level="5.3" data-path="tibbles.html"><a href="tibbles.html#tibbles-vs.data.frame"><i class="fa fa-check"></i><b>5.3</b> Tibbles vs. data.frame</a></li>
<li class="chapter" data-level="5.4" data-path="tibbles.html"><a href="tibbles.html#subsetting"><i class="fa fa-check"></i><b>5.4</b> Subsetting</a></li>
<li class="chapter" data-level="5.5" data-path="tibbles.html"><a href="tibbles.html#interacting-with-older-code"><i class="fa fa-check"></i><b>5.5</b> Interacting with older code</a></li>
<li class="chapter" data-level="5.6" data-path="tibbles.html"><a href="tibbles.html#exercises-12"><i class="fa fa-check"></i><b>5.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-import.html"><a href="data-import.html"><i class="fa fa-check"></i><b>6</b> Data Import</a><ul>
<li class="chapter" data-level="6.1" data-path="data-import.html"><a href="data-import.html#introduction-2"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="data-import.html"><a href="data-import.html#getting-started"><i class="fa fa-check"></i><b>6.2</b> Getting started</a><ul>
<li class="chapter" data-level="6.2.1" data-path="data-import.html"><a href="data-import.html#exercises-13"><i class="fa fa-check"></i><b>6.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="data-import.html"><a href="data-import.html#parsing-a-vector"><i class="fa fa-check"></i><b>6.3</b> Parsing a vector</a><ul>
<li class="chapter" data-level="6.3.1" data-path="data-import.html"><a href="data-import.html#exercises-14"><i class="fa fa-check"></i><b>6.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-import.html"><a href="data-import.html#other-types-of-data"><i class="fa fa-check"></i><b>6.4</b> Other Types of Data</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="tidy-data.html"><a href="tidy-data.html"><i class="fa fa-check"></i><b>7</b> Tidy Data</a><ul>
<li class="chapter" data-level="7.1" data-path="tidy-data.html"><a href="tidy-data.html#introduction-3"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="tidy-data.html"><a href="tidy-data.html#tidy-data-1"><i class="fa fa-check"></i><b>7.2</b> Tidy Data</a><ul>
<li class="chapter" data-level="7.2.1" data-path="tidy-data.html"><a href="tidy-data.html#exercises-15"><i class="fa fa-check"></i><b>7.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="tidy-data.html"><a href="tidy-data.html#spreading-and-gathering"><i class="fa fa-check"></i><b>7.3</b> Spreading and Gathering</a><ul>
<li class="chapter" data-level="7.3.1" data-path="tidy-data.html"><a href="tidy-data.html#exercises-16"><i class="fa fa-check"></i><b>7.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="tidy-data.html"><a href="tidy-data.html#separating-and-uniting"><i class="fa fa-check"></i><b>7.4</b> Separating and Uniting</a><ul>
<li class="chapter" data-level="7.4.1" data-path="tidy-data.html"><a href="tidy-data.html#exercises-17"><i class="fa fa-check"></i><b>7.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="tidy-data.html"><a href="tidy-data.html#missing-values-1"><i class="fa fa-check"></i><b>7.5</b> Missing Values</a><ul>
<li class="chapter" data-level="7.5.1" data-path="tidy-data.html"><a href="tidy-data.html#exercises-18"><i class="fa fa-check"></i><b>7.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="tidy-data.html"><a href="tidy-data.html#case-study"><i class="fa fa-check"></i><b>7.6</b> Case Study</a><ul>
<li class="chapter" data-level="7.6.1" data-path="tidy-data.html"><a href="tidy-data.html#exercises-19"><i class="fa fa-check"></i><b>7.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="tidy-data.html"><a href="tidy-data.html#non-tidy-data"><i class="fa fa-check"></i><b>7.7</b> Non-Tidy Data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="relational-data.html"><a href="relational-data.html"><i class="fa fa-check"></i><b>8</b> Relational Data</a><ul>
<li class="chapter" data-level="8.1" data-path="relational-data.html"><a href="relational-data.html#prerequisites-2"><i class="fa fa-check"></i><b>8.1</b> Prerequisites</a></li>
<li class="chapter" data-level="8.2" data-path="relational-data.html"><a href="relational-data.html#nycflights13"><i class="fa fa-check"></i><b>8.2</b> nycflights13</a><ul>
<li class="chapter" data-level="8.2.1" data-path="relational-data.html"><a href="relational-data.html#exercises-20"><i class="fa fa-check"></i><b>8.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="relational-data.html"><a href="relational-data.html#keys"><i class="fa fa-check"></i><b>8.3</b> Keys</a></li>
<li class="chapter" data-level="8.4" data-path="relational-data.html"><a href="relational-data.html#mutating-joins"><i class="fa fa-check"></i><b>8.4</b> Mutating Joins</a><ul>
<li class="chapter" data-level="8.4.1" data-path="relational-data.html"><a href="relational-data.html#exercises-21"><i class="fa fa-check"></i><b>8.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="relational-data.html"><a href="relational-data.html#filtering-joins"><i class="fa fa-check"></i><b>8.5</b> Filtering Joins</a><ul>
<li class="chapter" data-level="8.5.1" data-path="relational-data.html"><a href="relational-data.html#exercises-22"><i class="fa fa-check"></i><b>8.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="relational-data.html"><a href="relational-data.html#set-operations"><i class="fa fa-check"></i><b>8.6</b> Set operations</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="strings.html"><a href="strings.html"><i class="fa fa-check"></i><b>9</b> Strings</a><ul>
<li class="chapter" data-level="9.1" data-path="strings.html"><a href="strings.html#introduction-4"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="strings.html"><a href="strings.html#string-basics"><i class="fa fa-check"></i><b>9.2</b> String Basics</a><ul>
<li class="chapter" data-level="9.2.1" data-path="strings.html"><a href="strings.html#exercises-23"><i class="fa fa-check"></i><b>9.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="strings.html"><a href="strings.html#matching-patterns-and-regular-expressions"><i class="fa fa-check"></i><b>9.3</b> Matching Patterns and Regular Expressions</a><ul>
<li class="chapter" data-level="9.3.1" data-path="strings.html"><a href="strings.html#exercises-24"><i class="fa fa-check"></i><b>9.3.1</b> Exercises</a></li>
<li class="chapter" data-level="9.3.2" data-path="strings.html"><a href="strings.html#repitition"><i class="fa fa-check"></i><b>9.3.2</b> Repitition</a></li>
<li class="chapter" data-level="9.3.3" data-path="strings.html"><a href="strings.html#grouping-and-backreferences"><i class="fa fa-check"></i><b>9.3.3</b> Grouping and backreferences</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="strings.html"><a href="strings.html#tools"><i class="fa fa-check"></i><b>9.4</b> Tools</a><ul>
<li class="chapter" data-level="9.4.1" data-path="strings.html"><a href="strings.html#detect-matches"><i class="fa fa-check"></i><b>9.4.1</b> Detect matches</a></li>
<li class="chapter" data-level="9.4.2" data-path="strings.html"><a href="strings.html#exercises-29"><i class="fa fa-check"></i><b>9.4.2</b> Exercises</a></li>
<li class="chapter" data-level="9.4.3" data-path="strings.html"><a href="strings.html#extract-matches"><i class="fa fa-check"></i><b>9.4.3</b> Extract Matches</a></li>
<li class="chapter" data-level="9.4.4" data-path="strings.html"><a href="strings.html#grouped-matches"><i class="fa fa-check"></i><b>9.4.4</b> Grouped Matches</a></li>
<li class="chapter" data-level="9.4.5" data-path="strings.html"><a href="strings.html#splitting"><i class="fa fa-check"></i><b>9.4.5</b> Splitting</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="strings.html"><a href="strings.html#other-types-of-patterns"><i class="fa fa-check"></i><b>9.5</b> Other types of patterns</a><ul>
<li class="chapter" data-level="9.5.1" data-path="strings.html"><a href="strings.html#exercises-33"><i class="fa fa-check"></i><b>9.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="strings.html"><a href="strings.html#stringi"><i class="fa fa-check"></i><b>9.6</b> stringi</a><ul>
<li class="chapter" data-level="9.6.1" data-path="strings.html"><a href="strings.html#exercises-34"><i class="fa fa-check"></i><b>9.6.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>10</b> Factors</a><ul>
<li class="chapter" data-level="10.1" data-path="factors.html"><a href="factors.html#introduction-5"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="factors.html"><a href="factors.html#creating-factors"><i class="fa fa-check"></i><b>10.2</b> Creating Factors</a></li>
<li class="chapter" data-level="10.3" data-path="factors.html"><a href="factors.html#general-social-survey"><i class="fa fa-check"></i><b>10.3</b> General Social Survey</a><ul>
<li class="chapter" data-level="10.3.1" data-path="factors.html"><a href="factors.html#exercises-35"><i class="fa fa-check"></i><b>10.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="factors.html"><a href="factors.html#modifying-factor-order"><i class="fa fa-check"></i><b>10.4</b> Modifying factor order</a><ul>
<li class="chapter" data-level="10.4.1" data-path="factors.html"><a href="factors.html#exercises-36"><i class="fa fa-check"></i><b>10.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="factors.html"><a href="factors.html#modifying-factor-levels"><i class="fa fa-check"></i><b>10.5</b> Modifying factor levels</a><ul>
<li class="chapter" data-level="10.5.1" data-path="factors.html"><a href="factors.html#exercises-37"><i class="fa fa-check"></i><b>10.5.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>11</b> Dates and Times</a><ul>
<li class="chapter" data-level="11.1" data-path="dates-and-times.html"><a href="dates-and-times.html#prerequisite"><i class="fa fa-check"></i><b>11.1</b> Prerequisite</a></li>
<li class="chapter" data-level="11.2" data-path="dates-and-times.html"><a href="dates-and-times.html#creating-datetimes"><i class="fa fa-check"></i><b>11.2</b> Creating date/times</a><ul>
<li class="chapter" data-level="11.2.1" data-path="dates-and-times.html"><a href="dates-and-times.html#exercises-38"><i class="fa fa-check"></i><b>11.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="dates-and-times.html"><a href="dates-and-times.html#date-time-components"><i class="fa fa-check"></i><b>11.3</b> Date-Time Components</a><ul>
<li class="chapter" data-level="11.3.1" data-path="dates-and-times.html"><a href="dates-and-times.html#exercises-39"><i class="fa fa-check"></i><b>11.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="dates-and-times.html"><a href="dates-and-times.html#time-spans"><i class="fa fa-check"></i><b>11.4</b> Time Spans</a><ul>
<li class="chapter" data-level="11.4.1" data-path="dates-and-times.html"><a href="dates-and-times.html#durations"><i class="fa fa-check"></i><b>11.4.1</b> Durations</a></li>
<li class="chapter" data-level="11.4.2" data-path="dates-and-times.html"><a href="dates-and-times.html#periods"><i class="fa fa-check"></i><b>11.4.2</b> Periods</a></li>
<li class="chapter" data-level="11.4.3" data-path="dates-and-times.html"><a href="dates-and-times.html#intervals"><i class="fa fa-check"></i><b>11.4.3</b> Intervals</a></li>
<li class="chapter" data-level="11.4.4" data-path="dates-and-times.html"><a href="dates-and-times.html#exercises-40"><i class="fa fa-check"></i><b>11.4.4</b> Exercises</a></li>
<li class="chapter" data-level="11.4.5" data-path="dates-and-times.html"><a href="dates-and-times.html#time-zones"><i class="fa fa-check"></i><b>11.4.5</b> Time Zones</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>12</b> Vectors</a><ul>
<li class="chapter" data-level="12.1" data-path="vectors.html"><a href="vectors.html#introduction-6"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="vectors.html"><a href="vectors.html#important-types-of-atomic-vector"><i class="fa fa-check"></i><b>12.2</b> Important types of Atomic Vector</a><ul>
<li class="chapter" data-level="12.2.1" data-path="vectors.html"><a href="vectors.html#exercises-41"><i class="fa fa-check"></i><b>12.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="vectors.html"><a href="vectors.html#using-atomic-vectors"><i class="fa fa-check"></i><b>12.3</b> Using atomic vectors</a></li>
<li class="chapter" data-level="12.4" data-path="vectors.html"><a href="vectors.html#recursive-vectors-lists"><i class="fa fa-check"></i><b>12.4</b> Recursive Vectors (lists)</a><ul>
<li class="chapter" data-level="12.4.1" data-path="vectors.html"><a href="vectors.html#exercises-42"><i class="fa fa-check"></i><b>12.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="vectors.html"><a href="vectors.html#augmented-vectors"><i class="fa fa-check"></i><b>12.5</b> Augmented Vectors</a><ul>
<li class="chapter" data-level="12.5.1" data-path="vectors.html"><a href="vectors.html#exercises-43"><i class="fa fa-check"></i><b>12.5.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>13</b> Iteration</a><ul>
<li class="chapter" data-level="13.1" data-path="iteration.html"><a href="iteration.html#introduction-7"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="iteration.html"><a href="iteration.html#for-loops"><i class="fa fa-check"></i><b>13.2</b> For Loops</a><ul>
<li class="chapter" data-level="13.2.1" data-path="iteration.html"><a href="iteration.html#exercises-44"><i class="fa fa-check"></i><b>13.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="iteration.html"><a href="iteration.html#for-loop-variations"><i class="fa fa-check"></i><b>13.3</b> For loop variations</a><ul>
<li class="chapter" data-level="13.3.1" data-path="iteration.html"><a href="iteration.html#section"><i class="fa fa-check"></i><b>13.3.1</b> </a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="iteration.html"><a href="iteration.html#for-loops-vs.functionals"><i class="fa fa-check"></i><b>13.4</b> For loops vs. functionals</a><ul>
<li class="chapter" data-level="13.4.1" data-path="iteration.html"><a href="iteration.html#exercises-45"><i class="fa fa-check"></i><b>13.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="iteration.html"><a href="iteration.html#the-map-functions"><i class="fa fa-check"></i><b>13.5</b> The map functions</a><ul>
<li class="chapter" data-level="13.5.1" data-path="iteration.html"><a href="iteration.html#shortcuts"><i class="fa fa-check"></i><b>13.5.1</b> Shortcuts</a></li>
<li class="chapter" data-level="13.5.2" data-path="iteration.html"><a href="iteration.html#exercises-46"><i class="fa fa-check"></i><b>13.5.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="iteration.html"><a href="iteration.html#dealing-with-failure"><i class="fa fa-check"></i><b>13.6</b> Dealing with Failure</a></li>
<li class="chapter" data-level="13.7" data-path="iteration.html"><a href="iteration.html#mapping-over-multiple-arguments"><i class="fa fa-check"></i><b>13.7</b> Mapping over multiple arguments</a></li>
<li class="chapter" data-level="13.8" data-path="iteration.html"><a href="iteration.html#walk"><i class="fa fa-check"></i><b>13.8</b> Walk</a></li>
<li class="chapter" data-level="13.9" data-path="iteration.html"><a href="iteration.html#other-patterns-of-for-loops"><i class="fa fa-check"></i><b>13.9</b> Other patterns of for loops</a><ul>
<li class="chapter" data-level="13.9.1" data-path="iteration.html"><a href="iteration.html#exercises-47"><i class="fa fa-check"></i><b>13.9.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="model-introduction.html"><a href="model-introduction.html"><i class="fa fa-check"></i><b>14</b> Model Introduction</a></li>
<li class="chapter" data-level="15" data-path="model-basics.html"><a href="model-basics.html"><i class="fa fa-check"></i><b>15</b> Model Basics</a><ul>
<li class="chapter" data-level="15.1" data-path="model-basics.html"><a href="model-basics.html#prerequisites-3"><i class="fa fa-check"></i><b>15.1</b> Prerequisites</a></li>
<li class="chapter" data-level="15.2" data-path="model-basics.html"><a href="model-basics.html#a-simple-model"><i class="fa fa-check"></i><b>15.2</b> A simple model</a><ul>
<li class="chapter" data-level="15.2.1" data-path="model-basics.html"><a href="model-basics.html#exercises-48"><i class="fa fa-check"></i><b>15.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="model-basics.html"><a href="model-basics.html#visualizing-models"><i class="fa fa-check"></i><b>15.3</b> Visualizing Models</a><ul>
<li class="chapter" data-level="15.3.1" data-path="model-basics.html"><a href="model-basics.html#exercises-49"><i class="fa fa-check"></i><b>15.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="model-basics.html"><a href="model-basics.html#formulas-and-model-families"><i class="fa fa-check"></i><b>15.4</b> Formulas and Model Families</a><ul>
<li class="chapter" data-level="15.4.1" data-path="model-basics.html"><a href="model-basics.html#categorical-variables"><i class="fa fa-check"></i><b>15.4.1</b> Categorical Variables</a></li>
<li class="chapter" data-level="15.4.2" data-path="model-basics.html"><a href="model-basics.html#exercises-50"><i class="fa fa-check"></i><b>15.4.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="model-basics.html"><a href="model-basics.html#missing-values-2"><i class="fa fa-check"></i><b>15.5</b> Missing values</a></li>
<li class="chapter" data-level="15.6" data-path="model-basics.html"><a href="model-basics.html#other-model-families"><i class="fa fa-check"></i><b>15.6</b> Other model families</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>16</b> R Markdown</a><ul>
<li class="chapter" data-level="16.1" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-basics"><i class="fa fa-check"></i><b>16.1</b> R Markdown Basics</a><ul>
<li class="chapter" data-level="16.1.1" data-path="r-markdown.html"><a href="r-markdown.html#exercise"><i class="fa fa-check"></i><b>16.1.1</b> Exercise</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="r-markdown.html"><a href="r-markdown.html#text-formatting-with-r-markdown"><i class="fa fa-check"></i><b>16.2</b> Text formatting with R Markdown</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="r-markdown-workflow.html"><a href="r-markdown-workflow.html"><i class="fa fa-check"></i><b>17</b> R Markdown Workflow</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exercise Solutions and Notes for “R for Data Science”</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-import" class="section level1">
<h1><span class="header-section-number">6</span> Data Import</h1>
<div id="introduction-2" class="section level2">
<h2><span class="header-section-number">6.1</span> Introduction</h2>
<p>Functions and packages used:</p>
<ul>
<li><strong>readr</strong>, <strong>feather</strong>, <strong>haven</strong>, <strong>rio</strong></li>
<li><code>read_csv</code></li>
<li><code>parse_*</code></li>
<li><code>type_convert</code></li>
<li><code>save</code>, <code>load</code></li>
<li><code>readRDS</code>, <code>writeRDS</code></li>
<li><code>write_csv</code>, <code>write_tsv</code>, <code>write_feather</code></li>
<li><code>read_lines</code>, <code>read_file</code></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</code></pre></div>
</div>
<div id="getting-started" class="section level2">
<h2><span class="header-section-number">6.2</span> Getting started</h2>
<p><strong>Note:</strong> <code>read_log()</code> is important for web data, but likely to be irrelevant to most political science research</p>
<p><strong>TODO</strong> fill in the links and add any missing</p>
<div id="exercises-13" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What function would you use to read a file where fields were separated with “|”?</li>
</ol>
<p>I’d use <code>read_delim</code> with <code>delim=&quot;|&quot;</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read_delim</span>(file, <span class="dt">delim =</span> <span class="st">&quot;|&quot;</span>)</code></pre></div>
<ol start="2" style="list-style-type: decimal">
<li>Apart from <code>file</code>, <code>skip</code>, and <code>comment</code>, what other arguments do <code>read_csv()</code> and <code>read_tsv()</code> have in common?</li>
</ol>
<p>They have the following arguments in common:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">union</span>(<span class="kw">names</span>(<span class="kw">formals</span>(read_csv)), <span class="kw">names</span>(<span class="kw">formals</span>(read_tsv)))
<span class="co">#&gt;  [1] &quot;file&quot;      &quot;col_names&quot; &quot;col_types&quot; &quot;locale&quot;    &quot;na&quot;       </span>
<span class="co">#&gt;  [6] &quot;quoted_na&quot; &quot;comment&quot;   &quot;trim_ws&quot;   &quot;skip&quot;      &quot;n_max&quot;    </span>
<span class="co">#&gt; [11] &quot;guess_max&quot; &quot;progress&quot;</span></code></pre></div>
<ul>
<li><code>col_names</code> and <code>col_types</code> are used to specify the column names and how to parse the columns</li>
<li><code>locale</code> is important for determining things like the enecoding and whether “.” or “,” is used as a decimal mark.</li>
<li><code>na</code> and <code>quoted_na</code> control which strings are treated as missing values when parsing vectors</li>
<li><code>trim_ws</code> trims whitespace before and after cells before parsing</li>
<li><code>n_max</code> sets how many rows to read</li>
<li><code>guess_max</code> sets how many rows to use when guessing the column type</li>
<li><code>progress</code> determines whether a progress bar is shown.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>What are the most important arguments to <code>read_fwf()</code>?</li>
</ol>
<p>The most important argument to <code>read_fwf</code> which reads “fixed-width formats”, is <code>col_positions</code> which tells the function where data columns begin and end.</p>
<ol start="4" style="list-style-type: decimal">
<li>Sometimes strings in a CSV file contain commas. To prevent them from causing problems they need to be surrounded by a quoting character, like <code>&quot;</code> or <code>'</code>. By convention, <code>read_csv()</code> assumes that the quoting character will be <code>&quot;</code>, and if you want to change it you’ll need to use <code>read_delim()</code> instead. What arguments do you need to specify to read the following text into a data frame?</li>
</ol>
<pre><code>&quot;x,y\n1,&#39;a,b&#39;&quot;</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> &quot;x,y</span><span class="ch">\n</span><span class="st">1,&#39;a,b&#39;&quot;</span>
<span class="kw">read_delim</span>(x, <span class="st">&quot;,&quot;</span>, <span class="dt">quote =</span> <span class="st">&quot;&#39;&quot;</span>)
<span class="co">#&gt; # A tibble: 1 × 2</span>
<span class="co">#&gt;       x     y</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1     1   a,b</span></code></pre></div>
<ol start="6" style="list-style-type: decimal">
<li>Identify what is wrong with each of the following inline CSV files. What happens when you run the code?</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read_csv</span>(<span class="st">&quot;a,b</span><span class="ch">\n</span><span class="st">1,2,3</span><span class="ch">\n</span><span class="st">4,5,6&quot;</span>)
<span class="co">#&gt; Warning: 2 parsing failures.</span>
<span class="co">#&gt; row col  expected    actual</span>
<span class="co">#&gt;   1  -- 2 columns 3 columns</span>
<span class="co">#&gt;   2  -- 2 columns 3 columns</span>
<span class="co">#&gt; # A tibble: 2 × 2</span>
<span class="co">#&gt;       a     b</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1     1     2</span>
<span class="co">#&gt; 2     4     5</span></code></pre></div>
<p>Only two columns are specified in the header “a” and “b”, but the rows have three columns, so the last column in dropped.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read_csv</span>(<span class="st">&quot;a,b,c</span><span class="ch">\n</span><span class="st">1,2</span><span class="ch">\n</span><span class="st">1,2,3,4&quot;</span>)
<span class="co">#&gt; Warning: 2 parsing failures.</span>
<span class="co">#&gt; row col  expected    actual</span>
<span class="co">#&gt;   1  -- 3 columns 2 columns</span>
<span class="co">#&gt;   2  -- 3 columns 4 columns</span>
<span class="co">#&gt; # A tibble: 2 × 3</span>
<span class="co">#&gt;       a     b     c</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1     1     2    NA</span>
<span class="co">#&gt; 2     1     2     3</span></code></pre></div>
<p>The numbers of columns in the data do not match the number of columns in the header (three). In row one, there are only two values, so column <code>c</code> is set to missing. In row two, there is an extra value, and that value is dropped.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read_csv</span>(<span class="st">&quot;a,b</span><span class="ch">\n\&quot;</span><span class="st">1&quot;</span>)
<span class="co">#&gt; Warning: 2 parsing failures.</span>
<span class="co">#&gt; row col                     expected    actual</span>
<span class="co">#&gt;   1  a  closing quote at end of file          </span>
<span class="co">#&gt;   1  -- 2 columns                    1 columns</span>
<span class="co">#&gt; # A tibble: 1 × 2</span>
<span class="co">#&gt;       a     b</span>
<span class="co">#&gt;   &lt;int&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1     1  &lt;NA&gt;</span></code></pre></div>
<p>It’s not clear what the intent was here. The opening quote <code>\\&quot;1</code> is dropped because it is not closed, and <code>a</code> is treated as an integer.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read_csv</span>(<span class="st">&quot;a,b</span><span class="ch">\n</span><span class="st">1,2</span><span class="ch">\n</span><span class="st">a,b&quot;</span>)
<span class="co">#&gt; # A tibble: 2 × 2</span>
<span class="co">#&gt;       a     b</span>
<span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1     1     2</span>
<span class="co">#&gt; 2     a     b</span></code></pre></div>
<p>Both “a” and “b” are treated as character vectors since they contain non-numeric strings. This may have been intentional, or the author may have intended the values of the columns to be “1,2” and “a,b”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read_csv</span>(<span class="st">&quot;a;b</span><span class="ch">\n</span><span class="st">1;3&quot;</span>)
<span class="co">#&gt; # A tibble: 1 × 1</span>
<span class="co">#&gt;   `a;b`</span>
<span class="co">#&gt;   &lt;chr&gt;</span>
<span class="co">#&gt; 1   1;3</span></code></pre></div>
<p>The values are separated by “;” rather than “,”. Use <code>read_csv2</code> instead:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">read_csv2</span>(<span class="st">&quot;a;b</span><span class="ch">\n</span><span class="st">1;3&quot;</span>)
<span class="co">#&gt; # A tibble: 1 × 2</span>
<span class="co">#&gt;       a     b</span>
<span class="co">#&gt;   &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1     1     3</span></code></pre></div>
</div>
</div>
<div id="parsing-a-vector" class="section level2">
<h2><span class="header-section-number">6.3</span> Parsing a vector</h2>
<p><em>Notes</em> This is detailed, but these details can make your life hell. Skim now, but be aware that what should be simple, actually is not.</p>
<blockquote class="twitter-tweet" data-lang="en">
<p lang="en" dir="ltr">
In data analysis, ��% is data cleaning, ��% is modeling, and the rest is character encoding issues
</p>
— Jeffrey B. Arnold (<span class="citation">@jrnld</span>) <a href="https://twitter.com/jrnld/status/759608460677832706">July 31, 2016</a>
</blockquote>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
<p>This Computerphile video on Unicode is great <a href="https://www.youtube.com/watch?v=MijmeoH9LT4">Characters, Symbols and the Unicode Miracle - Computerphile</a></p>
<p>Note that these issues are real. Reusing one of Chris Adolph’s csv files from an earlier version of this course gave me problems, resulting in me filing this <a href="https://github.com/tidyverse/readr/issues/111">bug report</a>.</p>
<p>The suggested reading is very useful: <a href="http://kunststube.net/encoding/" class="uri">http://kunststube.net/encoding/</a></p>
<p>This becomes especially useful when you take “Text as Data”.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">charToRaw</span>(<span class="st">&quot;Jeff&quot;</span>)
<span class="co">#&gt; [1] 4a 65 66 66</span>
<span class="kw">class</span>(<span class="kw">charToRaw</span>(<span class="st">&quot;Jeff&quot;</span>))
<span class="co">#&gt; [1] &quot;raw&quot;</span></code></pre></div>
<div id="exercises-14" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li>What are the most important arguments to <code>locale()</code>?</li>
</ol>
<p>The locale broadly controls the following:</p>
<ul>
<li>date and time formats: <code>date_names</code>, <code>date_format</code>, and <code>time_format</code></li>
<li>time_zone: <code>tz</code></li>
<li>numbers: <code>decimal_mark</code>, <code>grouping_mark</code></li>
<li>encoding: <code>encoding</code></li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>What happens if you try and set <code>decimal_mark</code> and <code>grouping_mark</code> to the same character? What happens to the default value of <code>grouping_mark</code> when you set <code>decimal_mark</code> to “,”? What happens to the default value of <code>decimal_mark</code> when you set the <code>grouping_mark</code> to “.”?</li>
</ol>
<p>If the decimal and grouping marks are set to the same character, <code>locale</code> throws an error:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">locale</span>(<span class="dt">decimal_mark =</span> <span class="st">&quot;.&quot;</span>, <span class="dt">grouping_mark =</span> <span class="st">&quot;.&quot;</span>)
<span class="co">#&gt; Error: `decimal_mark` and `grouping_mark` must be different</span></code></pre></div>
<p>If the <code>decimal_mark</code> is set to the comma “<code>,&quot;</code>, then the grouping mark is set to the period <code>&quot;.&quot;</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">locale</span>(<span class="dt">decimal_mark =</span> <span class="st">&quot;,&quot;</span>)
<span class="co">#&gt; &lt;locale&gt;</span>
<span class="co">#&gt; Numbers:  123.456,78</span>
<span class="co">#&gt; Formats:  %AD / %AT</span>
<span class="co">#&gt; Timezone: UTC</span>
<span class="co">#&gt; Encoding: UTF-8</span>
<span class="co">#&gt; &lt;date_names&gt;</span>
<span class="co">#&gt; Days:   Sunday (Sun), Monday (Mon), Tuesday (Tue), Wednesday (Wed),</span>
<span class="co">#&gt;         Thursday (Thu), Friday (Fri), Saturday (Sat)</span>
<span class="co">#&gt; Months: January (Jan), February (Feb), March (Mar), April (Apr), May</span>
<span class="co">#&gt;         (May), June (Jun), July (Jul), August (Aug), September</span>
<span class="co">#&gt;         (Sep), October (Oct), November (Nov), December (Dec)</span>
<span class="co">#&gt; AM/PM:  AM/PM</span></code></pre></div>
<p>If the grouping mark is set to a period, then the decimal mark is set to a comma</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">locale</span>(<span class="dt">grouping_mark =</span> <span class="st">&quot;,&quot;</span>)
<span class="co">#&gt; &lt;locale&gt;</span>
<span class="co">#&gt; Numbers:  123,456.78</span>
<span class="co">#&gt; Formats:  %AD / %AT</span>
<span class="co">#&gt; Timezone: UTC</span>
<span class="co">#&gt; Encoding: UTF-8</span>
<span class="co">#&gt; &lt;date_names&gt;</span>
<span class="co">#&gt; Days:   Sunday (Sun), Monday (Mon), Tuesday (Tue), Wednesday (Wed),</span>
<span class="co">#&gt;         Thursday (Thu), Friday (Fri), Saturday (Sat)</span>
<span class="co">#&gt; Months: January (Jan), February (Feb), March (Mar), April (Apr), May</span>
<span class="co">#&gt;         (May), June (Jun), July (Jul), August (Aug), September</span>
<span class="co">#&gt;         (Sep), October (Oct), November (Nov), December (Dec)</span>
<span class="co">#&gt; AM/PM:  AM/PM</span></code></pre></div>
<ol start="3" style="list-style-type: decimal">
<li>I didn’t discuss the <code>date_format</code> and <code>time_format</code> options to <code>locale()</code>. What do they do? Construct an example that shows when they might be useful.</li>
</ol>
<p>They provide default date and time formats. The <a href="https://cran.r-project.org/web/packages/readr/vignettes/locales.html">readr vignette</a> discusses using these to parse dates: since dates can include languages specific weekday and month names, and different conventions for specifying AM/PM</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">locale</span>()
<span class="co">#&gt; &lt;locale&gt;</span>
<span class="co">#&gt; Numbers:  123,456.78</span>
<span class="co">#&gt; Formats:  %AD / %AT</span>
<span class="co">#&gt; Timezone: UTC</span>
<span class="co">#&gt; Encoding: UTF-8</span>
<span class="co">#&gt; &lt;date_names&gt;</span>
<span class="co">#&gt; Days:   Sunday (Sun), Monday (Mon), Tuesday (Tue), Wednesday (Wed),</span>
<span class="co">#&gt;         Thursday (Thu), Friday (Fri), Saturday (Sat)</span>
<span class="co">#&gt; Months: January (Jan), February (Feb), March (Mar), April (Apr), May</span>
<span class="co">#&gt;         (May), June (Jun), July (Jul), August (Aug), September</span>
<span class="co">#&gt;         (Sep), October (Oct), November (Nov), December (Dec)</span>
<span class="co">#&gt; AM/PM:  AM/PM</span></code></pre></div>
<p>Examples from the readr vignette of parsing French dates</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">parse_date</span>(<span class="st">&quot;1 janvier 2015&quot;</span>, <span class="st">&quot;%d %B %Y&quot;</span>, <span class="dt">locale =</span> <span class="kw">locale</span>(<span class="st">&quot;fr&quot;</span>))
<span class="co">#&gt; [1] &quot;2015-01-01&quot;</span>
<span class="kw">parse_date</span>(<span class="st">&quot;14 oct. 1979&quot;</span>, <span class="st">&quot;%d %b %Y&quot;</span>, <span class="dt">locale =</span> <span class="kw">locale</span>(<span class="st">&quot;fr&quot;</span>))
<span class="co">#&gt; [1] &quot;1979-10-14&quot;</span></code></pre></div>
<p>Apparently the time format is not used for anything, but the date format is used for guessing column types.</p>
<ol start="4" style="list-style-type: decimal">
<li>If you live outside the US, create a new locale object that encapsulates the settings for the types of file you read most commonly.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?locale</code></pre></div>
<ol start="5" style="list-style-type: decimal">
<li>What’s the difference between <code>read_csv()</code> and <code>read_csv2()</code>?</li>
</ol>
<p>The delimiter. The function <code>read_csv</code> uses a comma, while <code>read_csv2</code> uses a semi-colon (<code>;</code>). Using a semi-colon is useful when commas are used as the decimal point (as in Europe).</p>
<ol start="6" style="list-style-type: decimal">
<li>What are the most common encodings used in Europe? What are the most common encodings used in Asia? Do some googling to find out.</li>
</ol>
<p>UTF-8 is standard now, and ASCII has been around forever.</p>
<p>For the European languages, there are separate encodings for Romance languages and Eastern European languages using Latin script, Cyrillic, Greek, Hebrew, Turkish: usually with separate ISO and Windows encoding standards. There is also Mac OS Roman.</p>
<p>For Asian languages Arabic and Vietnamese have ISO and Windows standards. The other major Asian scripts have their own:</p>
<ul>
<li>Japanese: JIS X 0208, Shift JIS, ISO-2022-JP</li>
<li>Chinese: GB 2312, GBK, GB 18030</li>
<li>Korean: KS X 1001, EUC-KR, ISO-2022-KR</li>
</ul>
<p>The list in the documentation for <code>stringi::stri_enc_detect</code> is pretty good since it supports the most common encodings:</p>
<ul>
<li>Western European Latin script languages: ISO-8859-1, Windows-1250 (also CP-1250 for code-point)</li>
<li>Eastern European Latin script languages: ISO-8859-2, Windows-1252</li>
<li>Greek: ISO-8859-7</li>
<li>Turkish: ISO-8859-9, Windows-1254</li>
<li>Hebrew: ISO-8859-8, IBM424, Windows 1255</li>
<li>Russian: Windows 1251</li>
<li>Japanese: Shift JIS, ISO-2022-JP, EUC-JP</li>
<li>Korean: ISO-2022-KR, EUC-KR</li>
<li>Chinese: GB18030, ISO-2022-CN (Simplified), Big5 (Traditional)</li>
<li>Arabic: ISO-8859-6, IBM420, Windows 1256</li>
</ul>
<p>For more information:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Character_encoding" class="uri">https://en.wikipedia.org/wiki/Character_encoding</a> has a good list</li>
<li><a href="http://stackoverflow.com/questions/8509339/what-is-the-most-common-encoding-of-each-language" class="uri">http://stackoverflow.com/questions/8509339/what-is-the-most-common-encoding-of-each-language</a></li>
<li><a href="http://kunststube.net/encoding/" class="uri">http://kunststube.net/encoding/</a></li>
</ul>
<p>Some of the more useful programs for this</p>
<ul>
<li>In R see <code>readr::guess_encoding</code> and the <strong>stringi</strong> package with <code>str_enc_detect</code></li>
<li>iconv: <a href="https://en.wikipedia.org/wiki/Iconv" class="uri">https://en.wikipedia.org/wiki/Iconv</a></li>
<li>chardet: <a href="https://github.com/chardet/chardet" class="uri">https://github.com/chardet/chardet</a> (Python)</li>
</ul>
<ol start="7" style="list-style-type: decimal">
<li>Generate the correct format string to parse each of the following dates and times:</li>
</ol>
</div>
</div>
<div id="other-types-of-data" class="section level2">
<h2><span class="header-section-number">6.4</span> Other Types of Data</h2>
<p><strong>NOTES</strong> Expand on what’s in this section:</p>
<ul>
<li>The <code>rio</code> package is very useful for loading different types of</li>
<li><p>Other useful functions and packages not mentioned here:</p></li>
<li>Stata: haven, read_dta. While the <strong>foreign</strong> package in R reads Stata files, it cannot read files created by the most recent version of Stata (&gt; 13).</li>
<li>SPSS: <code>haven::read_spss</code></li>
<li>SAS: <code>haven::read_sas</code></li>
<li>XLS: <code>readxl::read_excel</code></li>
<li>JSON: <strong>jsonlite</strong> pacakge. However, often there are APIs and clients which make this easier, e.g. <strong>pollstR</strong> which returns data from the Huffington Post Pollster API.</li>
<li>XML: xml2</li>
<li>HTML: rvest</li>
<li>Databases: <strong>DBI</strong> and backends</li>
<li><p>PDF: This is really a different thing as you are extracting data from an unstructured form. It also depends on whether the PDF text is actually an image as from a scan, in which case you need to use OCR to first indentify words.</p>
<ul>
<li><code>tabulizer</code>: extracts tables from PDF documents</li>
<li><code>pdftools</code>: extracts text from pdf documents</li>
<li>Also see general text analysis packages like <code>tm</code>, <code>quanteda</code>, etc. which often have functions to assist with getting text from PDFs.</li>
</ul></li>
</ul>
<p>Links to Jenny Bryan’s tutorials: <a href="https://jennybc.github.io/purrr-tutorial/index.html">purrr-tutorial worked examples</a></p>
<ul>
<li>Discussing <code>csvy</code> as an example of a csv with metadata</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tibbles.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tidy-data.html" class="navigation navigation-next " aria-label="Next page""><i class="fa fa-angle-right"></i></a>

<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jrnold/r4ds/edit/master/import.Rmd",
"text": "Edit"
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    if (location.protocol !== "file:" && /^https?:/.test(script.src))
      script.src  = script.src.replace(/^https?:/, '');
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
