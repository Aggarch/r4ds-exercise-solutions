<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>R for Data Science Solutions</title>
  <meta name="description" content="This contains the solutions to the exercises in the book, R for Data Science, by Garrett Grolemund and Hadley Wickham.">
  <meta name="generator" content="bookdown 0.7.1 and GitBook 2.6.7">

  <meta property="og:title" content="R for Data Science Solutions" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="http://jrnold.github.io/r4ds-exercise-solutions" />
  
  <meta property="og:description" content="This contains the solutions to the exercises in the book, R for Data Science, by Garrett Grolemund and Hadley Wickham." />
  <meta name="github-repo" content="jrnold/r4ds-exercise-solutions" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R for Data Science Solutions" />
  <meta name="twitter:site" content="@jrnld" />
  <meta name="twitter:description" content="This contains the solutions to the exercises in the book, R for Data Science, by Garrett Grolemund and Hadley Wickham." />
  

<meta name="author" content="Jeffrey B. Arnold">



  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="model-building.html">
<link rel="next" href="communicate-intro.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />







<script src="libs/htmlwidgets-1.0/htmlwidgets.js"></script>
<link href="libs/str_view-0.1.0/str_view.css" rel="stylesheet" />
<script src="libs/str_view-binding-1.3.0/str_view.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; }
pre.numberSource a.sourceLine:empty
  { position: absolute; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: absolute; left: -5em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="r4ds.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">R for Data Science Solutions</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="part"><span><b>I Explore</b></span></li>
<li class="chapter" data-level="2" data-path="explore-intro.html"><a href="explore-intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a></li>
<li class="chapter" data-level="3" data-path="visualize.html"><a href="visualize.html"><i class="fa fa-check"></i><b>3</b> Visualize</a><ul>
<li class="chapter" data-level="3.1" data-path="visualize.html"><a href="visualize.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="visualize.html"><a href="visualize.html#first-steps"><i class="fa fa-check"></i><b>3.2</b> First Steps</a><ul>
<li class="chapter" data-level="3.2.1" data-path="visualize.html"><a href="visualize.html#exercise-1."><i class="fa fa-check"></i><b>3.2.1</b> Exercise 1.</a></li>
<li class="chapter" data-level="3.2.2" data-path="visualize.html"><a href="visualize.html#exercise-2."><i class="fa fa-check"></i><b>3.2.2</b> Exercise 2.</a></li>
<li class="chapter" data-level="3.2.3" data-path="visualize.html"><a href="visualize.html#exercise-3."><i class="fa fa-check"></i><b>3.2.3</b> Exercise 3.</a></li>
<li class="chapter" data-level="3.2.4" data-path="visualize.html"><a href="visualize.html#exercise-4."><i class="fa fa-check"></i><b>3.2.4</b> Exercise 4.</a></li>
<li class="chapter" data-level="3.2.5" data-path="visualize.html"><a href="visualize.html#exercise-5."><i class="fa fa-check"></i><b>3.2.5</b> Exercise 5.</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="visualize.html"><a href="visualize.html#aesthetic-mappings"><i class="fa fa-check"></i><b>3.3</b> Aesthetic mappings</a><ul>
<li class="chapter" data-level="3.3.1" data-path="visualize.html"><a href="visualize.html#exercise-1.-1"><i class="fa fa-check"></i><b>3.3.1</b> Exercise 1.</a></li>
<li class="chapter" data-level="3.3.2" data-path="visualize.html"><a href="visualize.html#exercise-2.-1"><i class="fa fa-check"></i><b>3.3.2</b> Exercise 2.</a></li>
<li class="chapter" data-level="3.3.3" data-path="visualize.html"><a href="visualize.html#exercise-3.-1"><i class="fa fa-check"></i><b>3.3.3</b> Exercise 3.</a></li>
<li class="chapter" data-level="3.3.4" data-path="visualize.html"><a href="visualize.html#exercise-4.-1"><i class="fa fa-check"></i><b>3.3.4</b> Exercise 4.</a></li>
<li class="chapter" data-level="3.3.5" data-path="visualize.html"><a href="visualize.html#exercise-5.-1"><i class="fa fa-check"></i><b>3.3.5</b> Exercise 5.</a></li>
<li class="chapter" data-level="3.3.6" data-path="visualize.html"><a href="visualize.html#exercise-6."><i class="fa fa-check"></i><b>3.3.6</b> Exercise 6.</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="visualize.html"><a href="visualize.html#common-problems"><i class="fa fa-check"></i><b>3.4</b> Common problems</a></li>
<li class="chapter" data-level="3.5" data-path="visualize.html"><a href="visualize.html#facets"><i class="fa fa-check"></i><b>3.5</b> Facets</a><ul>
<li class="chapter" data-level="3.5.1" data-path="visualize.html"><a href="visualize.html#exercise-1.-2"><i class="fa fa-check"></i><b>3.5.1</b> Exercise 1.</a></li>
<li class="chapter" data-level="3.5.2" data-path="visualize.html"><a href="visualize.html#exercise-2.-2"><i class="fa fa-check"></i><b>3.5.2</b> Exercise 2.</a></li>
<li class="chapter" data-level="3.5.3" data-path="visualize.html"><a href="visualize.html#exercise-3.-2"><i class="fa fa-check"></i><b>3.5.3</b> Exercise 3.</a></li>
<li class="chapter" data-level="3.5.4" data-path="visualize.html"><a href="visualize.html#exercise-5.-2"><i class="fa fa-check"></i><b>3.5.4</b> Exercise 5.</a></li>
<li class="chapter" data-level="3.5.5" data-path="visualize.html"><a href="visualize.html#exercise-6.-1"><i class="fa fa-check"></i><b>3.5.5</b> Exercise 6.</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="visualize.html"><a href="visualize.html#geometric-objects"><i class="fa fa-check"></i><b>3.6</b> Geometric Objects</a><ul>
<li class="chapter" data-level="3.6.1" data-path="visualize.html"><a href="visualize.html#exercise-1.-3"><i class="fa fa-check"></i><b>3.6.1</b> Exercise 1.</a></li>
<li class="chapter" data-level="3.6.2" data-path="visualize.html"><a href="visualize.html#exercise-2.-3"><i class="fa fa-check"></i><b>3.6.2</b> Exercise 2.</a></li>
<li class="chapter" data-level="3.6.3" data-path="visualize.html"><a href="visualize.html#exercise-3.-3"><i class="fa fa-check"></i><b>3.6.3</b> Exercise 3.</a></li>
<li class="chapter" data-level="3.6.4" data-path="visualize.html"><a href="visualize.html#exercise-4.-2"><i class="fa fa-check"></i><b>3.6.4</b> Exercise 4.</a></li>
<li class="chapter" data-level="3.6.5" data-path="visualize.html"><a href="visualize.html#exercise-5.-3"><i class="fa fa-check"></i><b>3.6.5</b> Exercise 5.</a></li>
<li class="chapter" data-level="3.6.6" data-path="visualize.html"><a href="visualize.html#exercise-6.-2"><i class="fa fa-check"></i><b>3.6.6</b> Exercise 6.</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="visualize.html"><a href="visualize.html#statistical-transformations"><i class="fa fa-check"></i><b>3.7</b> Statistical Transformations</a><ul>
<li class="chapter" data-level="3.7.1" data-path="visualize.html"><a href="visualize.html#exercise-1.-4"><i class="fa fa-check"></i><b>3.7.1</b> Exercise 1.</a></li>
<li class="chapter" data-level="3.7.2" data-path="visualize.html"><a href="visualize.html#exercise-2.-4"><i class="fa fa-check"></i><b>3.7.2</b> Exercise 2.</a></li>
<li class="chapter" data-level="3.7.3" data-path="visualize.html"><a href="visualize.html#exercise-3.-4"><i class="fa fa-check"></i><b>3.7.3</b> Exercise 3.</a></li>
<li class="chapter" data-level="3.7.4" data-path="visualize.html"><a href="visualize.html#exercise-4.-3"><i class="fa fa-check"></i><b>3.7.4</b> Exercise 4.</a></li>
<li class="chapter" data-level="3.7.5" data-path="visualize.html"><a href="visualize.html#exercise-5.-4"><i class="fa fa-check"></i><b>3.7.5</b> Exercise 5.</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="visualize.html"><a href="visualize.html#position-adjustments"><i class="fa fa-check"></i><b>3.8</b> Position Adjustments</a><ul>
<li class="chapter" data-level="3.8.1" data-path="visualize.html"><a href="visualize.html#exercise-1.-5"><i class="fa fa-check"></i><b>3.8.1</b> Exercise 1.</a></li>
<li class="chapter" data-level="3.8.2" data-path="visualize.html"><a href="visualize.html#exercise-2.-5"><i class="fa fa-check"></i><b>3.8.2</b> Exercise 2.</a></li>
<li class="chapter" data-level="3.8.3" data-path="visualize.html"><a href="visualize.html#exercise-3.-5"><i class="fa fa-check"></i><b>3.8.3</b> Exercise 3.</a></li>
<li class="chapter" data-level="3.8.4" data-path="visualize.html"><a href="visualize.html#exercise-4.-4"><i class="fa fa-check"></i><b>3.8.4</b> Exercise 4.</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="visualize.html"><a href="visualize.html#coordinate-systems"><i class="fa fa-check"></i><b>3.9</b> Coordinate Systems</a><ul>
<li class="chapter" data-level="3.9.1" data-path="visualize.html"><a href="visualize.html#exercise-1.-6"><i class="fa fa-check"></i><b>3.9.1</b> Exercise 1.</a></li>
<li class="chapter" data-level="3.9.2" data-path="visualize.html"><a href="visualize.html#exercise-2.-6"><i class="fa fa-check"></i><b>3.9.2</b> Exercise 2.</a></li>
<li class="chapter" data-level="3.9.3" data-path="visualize.html"><a href="visualize.html#exercise-3.-6"><i class="fa fa-check"></i><b>3.9.3</b> Exercise 3.</a></li>
<li class="chapter" data-level="3.9.4" data-path="visualize.html"><a href="visualize.html#exercise-4.-5"><i class="fa fa-check"></i><b>3.9.4</b> Exercise 4.</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="visualize.html"><a href="visualize.html#the-layered-grammar-of-graphics"><i class="fa fa-check"></i><b>3.10</b> The Layered Grammar of Graphics</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="workflow-basics.html"><a href="workflow-basics.html"><i class="fa fa-check"></i><b>4</b> Workflow Basics</a><ul>
<li class="chapter" data-level="4.1" data-path="workflow-basics.html"><a href="workflow-basics.html#coding-basics"><i class="fa fa-check"></i><b>4.1</b> Coding basics</a></li>
<li class="chapter" data-level="4.2" data-path="workflow-basics.html"><a href="workflow-basics.html#whats-in-a-name"><i class="fa fa-check"></i><b>4.2</b> What’s in a name?</a></li>
<li class="chapter" data-level="4.3" data-path="workflow-basics.html"><a href="workflow-basics.html#calling-functions"><i class="fa fa-check"></i><b>4.3</b> Calling functions</a></li>
<li class="chapter" data-level="4.4" data-path="workflow-basics.html"><a href="workflow-basics.html#practice"><i class="fa fa-check"></i><b>4.4</b> Practice</a><ul>
<li class="chapter" data-level="4.4.1" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-1"><i class="fa fa-check"></i><b>4.4.1</b> Exercise 1</a></li>
<li class="chapter" data-level="4.4.2" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-2"><i class="fa fa-check"></i><b>4.4.2</b> Exercise 2</a></li>
<li class="chapter" data-level="4.4.3" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-2-43"><i class="fa fa-check"></i><b>4.4.3</b> Exercise 2</a></li>
<li class="chapter" data-level="4.4.4" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-3-31"><i class="fa fa-check"></i><b>4.4.4</b> Exercise 3</a></li>
<li class="chapter" data-level="4.4.5" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4-24"><i class="fa fa-check"></i><b>4.4.5</b> Exercise 4</a></li>
<li class="chapter" data-level="4.4.6" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-6-9"><i class="fa fa-check"></i><b>4.4.6</b> Exercise 6</a></li>
<li class="chapter" data-level="4.4.7" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-7-4"><i class="fa fa-check"></i><b>4.4.7</b> Exercise 7</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="workflow-basics.html"><a href="workflow-basics.html#functions-are-for-humans-and-computers"><i class="fa fa-check"></i><b>4.5</b> Functions are for humans and computers</a><ul>
<li class="chapter" data-level="4.5.1" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-1-45"><i class="fa fa-check"></i><b>4.5.1</b> Exercise 1</a></li>
<li class="chapter" data-level="4.5.2" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-2-44"><i class="fa fa-check"></i><b>4.5.2</b> Exercise 2</a></li>
<li class="chapter" data-level="4.5.3" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-3-32"><i class="fa fa-check"></i><b>4.5.3</b> Exercise 3</a></li>
<li class="chapter" data-level="4.5.4" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4-25"><i class="fa fa-check"></i><b>4.5.4</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="workflow-basics.html"><a href="workflow-basics.html#conditional-execution"><i class="fa fa-check"></i><b>4.6</b> Conditional execution</a><ul>
<li class="chapter" data-level="4.6.1" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-1-46"><i class="fa fa-check"></i><b>4.6.1</b> Exercise 1</a></li>
<li class="chapter" data-level="4.6.2" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-2-45"><i class="fa fa-check"></i><b>4.6.2</b> Exercise 2</a></li>
<li class="chapter" data-level="4.6.3" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-3-33"><i class="fa fa-check"></i><b>4.6.3</b> Exercise 3</a></li>
<li class="chapter" data-level="4.6.4" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4-26"><i class="fa fa-check"></i><b>4.6.4</b> Exercise 4</a></li>
<li class="chapter" data-level="4.6.5" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-5-13"><i class="fa fa-check"></i><b>4.6.5</b> Exercise 5</a></li>
<li class="chapter" data-level="4.6.6" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-6-10"><i class="fa fa-check"></i><b>4.6.6</b> Exercise 6</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="workflow-basics.html"><a href="workflow-basics.html#function-arguments"><i class="fa fa-check"></i><b>4.7</b> Function arguments</a><ul>
<li class="chapter" data-level="4.7.1" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-1-47"><i class="fa fa-check"></i><b>4.7.1</b> Exercise 1</a></li>
<li class="chapter" data-level="4.7.2" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-2-46"><i class="fa fa-check"></i><b>4.7.2</b> Exercise 2</a></li>
<li class="chapter" data-level="4.7.3" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-3-34"><i class="fa fa-check"></i><b>4.7.3</b> Exercise 3</a></li>
<li class="chapter" data-level="4.7.4" data-path="workflow-basics.html"><a href="workflow-basics.html#exercise-4-27"><i class="fa fa-check"></i><b>4.7.4</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="workflow-basics.html"><a href="workflow-basics.html#environment"><i class="fa fa-check"></i><b>4.8</b> Environment</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="vectors.html"><a href="vectors.html"><i class="fa fa-check"></i><b>5</b> Vectors</a><ul>
<li class="chapter" data-level="5.1" data-path="vectors.html"><a href="vectors.html#introduction-12"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="vectors.html"><a href="vectors.html#vector-basics"><i class="fa fa-check"></i><b>5.2</b> Vector Basics</a></li>
<li class="chapter" data-level="5.3" data-path="vectors.html"><a href="vectors.html#important-types-of-atomic-vector"><i class="fa fa-check"></i><b>5.3</b> Important Types of Atomic Vector</a><ul>
<li class="chapter" data-level="5.3.1" data-path="vectors.html"><a href="vectors.html#exercise-1-48"><i class="fa fa-check"></i><b>5.3.1</b> Exercise 1</a></li>
<li class="chapter" data-level="5.3.2" data-path="vectors.html"><a href="vectors.html#exercise-2-47"><i class="fa fa-check"></i><b>5.3.2</b> Exercise 2</a></li>
<li class="chapter" data-level="5.3.3" data-path="vectors.html"><a href="vectors.html#exercise-3-35"><i class="fa fa-check"></i><b>5.3.3</b> Exercise 3</a></li>
<li class="chapter" data-level="5.3.4" data-path="vectors.html"><a href="vectors.html#exercise-4-28"><i class="fa fa-check"></i><b>5.3.4</b> Exercise 4</a></li>
<li class="chapter" data-level="5.3.5" data-path="vectors.html"><a href="vectors.html#exercise-5-14"><i class="fa fa-check"></i><b>5.3.5</b> Exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="vectors.html"><a href="vectors.html#using-atomic-vectors"><i class="fa fa-check"></i><b>5.4</b> Using atomic vectors</a><ul>
<li class="chapter" data-level="5.4.1" data-path="vectors.html"><a href="vectors.html#exercise-1-49"><i class="fa fa-check"></i><b>5.4.1</b> Exercise 1</a></li>
<li class="chapter" data-level="5.4.2" data-path="vectors.html"><a href="vectors.html#exercise-2-48"><i class="fa fa-check"></i><b>5.4.2</b> Exercise 2</a></li>
<li class="chapter" data-level="5.4.3" data-path="vectors.html"><a href="vectors.html#exercise-3-36"><i class="fa fa-check"></i><b>5.4.3</b> Exercise 3</a></li>
<li class="chapter" data-level="5.4.4" data-path="vectors.html"><a href="vectors.html#exercise-4-29"><i class="fa fa-check"></i><b>5.4.4</b> Exercise 4</a></li>
<li class="chapter" data-level="5.4.5" data-path="vectors.html"><a href="vectors.html#exercise-5-15"><i class="fa fa-check"></i><b>5.4.5</b> Exercise 5</a></li>
<li class="chapter" data-level="5.4.6" data-path="vectors.html"><a href="vectors.html#exercise-6-11"><i class="fa fa-check"></i><b>5.4.6</b> Exercise 6</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="vectors.html"><a href="vectors.html#recursive-vectors-lists"><i class="fa fa-check"></i><b>5.5</b> Recursive Vectors (lists)</a><ul>
<li class="chapter" data-level="5.5.1" data-path="vectors.html"><a href="vectors.html#exercise-1-50"><i class="fa fa-check"></i><b>5.5.1</b> Exercise 1</a></li>
<li class="chapter" data-level="5.5.2" data-path="vectors.html"><a href="vectors.html#exercise-2-49"><i class="fa fa-check"></i><b>5.5.2</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="vectors.html"><a href="vectors.html#attributes"><i class="fa fa-check"></i><b>5.6</b> Attributes</a></li>
<li class="chapter" data-level="5.7" data-path="vectors.html"><a href="vectors.html#augmented-vectors"><i class="fa fa-check"></i><b>5.7</b> Augmented Vectors</a><ul>
<li class="chapter" data-level="5.7.1" data-path="vectors.html"><a href="vectors.html#exercise-1-51"><i class="fa fa-check"></i><b>5.7.1</b> Exercise 1</a></li>
<li class="chapter" data-level="5.7.2" data-path="vectors.html"><a href="vectors.html#exercise-2-50"><i class="fa fa-check"></i><b>5.7.2</b> Exercise 2</a></li>
<li class="chapter" data-level="5.7.3" data-path="vectors.html"><a href="vectors.html#exercise-3-37"><i class="fa fa-check"></i><b>5.7.3</b> Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="iteration.html"><a href="iteration.html"><i class="fa fa-check"></i><b>6</b> Iteration</a><ul>
<li class="chapter" data-level="6.1" data-path="iteration.html"><a href="iteration.html#introduction-13"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="iteration.html"><a href="iteration.html#for-loops"><i class="fa fa-check"></i><b>6.2</b> For Loops</a><ul>
<li class="chapter" data-level="6.2.1" data-path="iteration.html"><a href="iteration.html#exercise-1-52"><i class="fa fa-check"></i><b>6.2.1</b> Exercise 1</a></li>
<li class="chapter" data-level="6.2.2" data-path="iteration.html"><a href="iteration.html#exercise-2-51"><i class="fa fa-check"></i><b>6.2.2</b> Exercise 2</a></li>
<li class="chapter" data-level="6.2.3" data-path="iteration.html"><a href="iteration.html#exercise-3-38"><i class="fa fa-check"></i><b>6.2.3</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="iteration.html"><a href="iteration.html#for-loop-variations"><i class="fa fa-check"></i><b>6.3</b> For loop variations</a><ul>
<li class="chapter" data-level="6.3.1" data-path="iteration.html"><a href="iteration.html#exercise-1-53"><i class="fa fa-check"></i><b>6.3.1</b> Exercise 1</a></li>
<li class="chapter" data-level="6.3.2" data-path="iteration.html"><a href="iteration.html#exercise-2-52"><i class="fa fa-check"></i><b>6.3.2</b> Exercise 2</a></li>
<li class="chapter" data-level="6.3.3" data-path="iteration.html"><a href="iteration.html#exercise-3-39"><i class="fa fa-check"></i><b>6.3.3</b> Exercise 3</a></li>
<li class="chapter" data-level="6.3.4" data-path="iteration.html"><a href="iteration.html#exercise-4-31"><i class="fa fa-check"></i><b>6.3.4</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="iteration.html"><a href="iteration.html#for-loops-vs.functionals"><i class="fa fa-check"></i><b>6.4</b> For loops vs. functionals</a><ul>
<li class="chapter" data-level="6.4.1" data-path="iteration.html"><a href="iteration.html#exercise-1-54"><i class="fa fa-check"></i><b>6.4.1</b> Exercise 1</a></li>
<li class="chapter" data-level="6.4.2" data-path="iteration.html"><a href="iteration.html#exercise-2-53"><i class="fa fa-check"></i><b>6.4.2</b> Exercise 2</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="iteration.html"><a href="iteration.html#the-map-functions"><i class="fa fa-check"></i><b>6.5</b> The map functions</a><ul>
<li class="chapter" data-level="6.5.1" data-path="iteration.html"><a href="iteration.html#exercise-1-55"><i class="fa fa-check"></i><b>6.5.1</b> Exercise 1</a></li>
<li class="chapter" data-level="6.5.2" data-path="iteration.html"><a href="iteration.html#exercise-2-54"><i class="fa fa-check"></i><b>6.5.2</b> Exercise 2</a></li>
<li class="chapter" data-level="6.5.3" data-path="iteration.html"><a href="iteration.html#exercise-3-40"><i class="fa fa-check"></i><b>6.5.3</b> Exercise 3</a></li>
<li class="chapter" data-level="6.5.4" data-path="iteration.html"><a href="iteration.html#exercise-4-32"><i class="fa fa-check"></i><b>6.5.4</b> Exercise 4</a></li>
<li class="chapter" data-level="6.5.5" data-path="iteration.html"><a href="iteration.html#exercise-5-16"><i class="fa fa-check"></i><b>6.5.5</b> Exercise 5</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="iteration.html"><a href="iteration.html#dealing-with-failure"><i class="fa fa-check"></i><b>6.6</b> Dealing with Failure</a></li>
<li class="chapter" data-level="6.7" data-path="iteration.html"><a href="iteration.html#mapping-over-multiple-arguments"><i class="fa fa-check"></i><b>6.7</b> Mapping over multiple arguments</a></li>
<li class="chapter" data-level="6.8" data-path="iteration.html"><a href="iteration.html#walk"><i class="fa fa-check"></i><b>6.8</b> Walk</a></li>
<li class="chapter" data-level="6.9" data-path="iteration.html"><a href="iteration.html#other-patterns-of-for-loops"><i class="fa fa-check"></i><b>6.9</b> Other patterns of for loops</a><ul>
<li class="chapter" data-level="6.9.1" data-path="iteration.html"><a href="iteration.html#exercise-1-56"><i class="fa fa-check"></i><b>6.9.1</b> Exercise 1</a></li>
<li class="chapter" data-level="6.9.2" data-path="iteration.html"><a href="iteration.html#exercise-2-55"><i class="fa fa-check"></i><b>6.9.2</b> Exercise 2</a></li>
<li class="chapter" data-level="6.9.3" data-path="iteration.html"><a href="iteration.html#exercise-3-41"><i class="fa fa-check"></i><b>6.9.3</b> Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Model</b></span></li>
<li class="chapter" data-level="7" data-path="model-intro.html"><a href="model-intro.html"><i class="fa fa-check"></i><b>7</b> Introduction</a></li>
<li class="chapter" data-level="8" data-path="model-basics.html"><a href="model-basics.html"><i class="fa fa-check"></i><b>8</b> Model Basics</a><ul>
<li class="chapter" data-level="8.1" data-path="model-basics.html"><a href="model-basics.html#prerequisites"><i class="fa fa-check"></i><b>8.1</b> Prerequisites</a></li>
<li class="chapter" data-level="8.2" data-path="model-basics.html"><a href="model-basics.html#a-simple-model"><i class="fa fa-check"></i><b>8.2</b> A simple model</a><ul>
<li class="chapter" data-level="8.2.1" data-path="model-basics.html"><a href="model-basics.html#exercise-1-57"><i class="fa fa-check"></i><b>8.2.1</b> Exercise 1</a></li>
<li class="chapter" data-level="8.2.2" data-path="model-basics.html"><a href="model-basics.html#exercise-2-56"><i class="fa fa-check"></i><b>8.2.2</b> Exercise 2</a></li>
<li class="chapter" data-level="8.2.3" data-path="model-basics.html"><a href="model-basics.html#exercise-3-42"><i class="fa fa-check"></i><b>8.2.3</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="model-basics.html"><a href="model-basics.html#visualizing-models"><i class="fa fa-check"></i><b>8.3</b> Visualizing Models</a><ul>
<li class="chapter" data-level="8.3.1" data-path="model-basics.html"><a href="model-basics.html#exercise-1-58"><i class="fa fa-check"></i><b>8.3.1</b> Exercise 1</a></li>
<li class="chapter" data-level="8.3.2" data-path="model-basics.html"><a href="model-basics.html#exercise-2-57"><i class="fa fa-check"></i><b>8.3.2</b> Exercise 2</a></li>
<li class="chapter" data-level="8.3.3" data-path="model-basics.html"><a href="model-basics.html#exercise-3-43"><i class="fa fa-check"></i><b>8.3.3</b> Exercise 3</a></li>
<li class="chapter" data-level="8.3.4" data-path="model-basics.html"><a href="model-basics.html#exercise-4-33"><i class="fa fa-check"></i><b>8.3.4</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="model-basics.html"><a href="model-basics.html#formulas-and-model-families"><i class="fa fa-check"></i><b>8.4</b> Formulas and Model Families</a><ul>
<li class="chapter" data-level="8.4.1" data-path="model-basics.html"><a href="model-basics.html#exercise-1-59"><i class="fa fa-check"></i><b>8.4.1</b> Exercise 1</a></li>
<li class="chapter" data-level="8.4.2" data-path="model-basics.html"><a href="model-basics.html#exercise-2-58"><i class="fa fa-check"></i><b>8.4.2</b> Exercise 2</a></li>
<li class="chapter" data-level="8.4.3" data-path="model-basics.html"><a href="model-basics.html#exercise-3-44"><i class="fa fa-check"></i><b>8.4.3</b> Exercise 3</a></li>
<li class="chapter" data-level="8.4.4" data-path="model-basics.html"><a href="model-basics.html#exercise-4-34"><i class="fa fa-check"></i><b>8.4.4</b> Exercise 4</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="model-basics.html"><a href="model-basics.html#missing-values-2"><i class="fa fa-check"></i><b>8.5</b> Missing values</a></li>
<li class="chapter" data-level="8.6" data-path="model-basics.html"><a href="model-basics.html#other-model-families"><i class="fa fa-check"></i><b>8.6</b> Other model families</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="model-building.html"><a href="model-building.html"><i class="fa fa-check"></i><b>9</b> Model Building</a><ul>
<li class="chapter" data-level="9.1" data-path="model-building.html"><a href="model-building.html#introduction-14"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="model-building.html"><a href="model-building.html#why-are-low-quality-diamonds-more-expensive"><i class="fa fa-check"></i><b>9.2</b> Why are low quality diamonds more expensive?</a><ul>
<li class="chapter" data-level="9.2.1" data-path="model-building.html"><a href="model-building.html#exercises-2"><i class="fa fa-check"></i><b>9.2.1</b> Exercises</a></li>
<li class="chapter" data-level="9.2.2" data-path="model-building.html"><a href="model-building.html#what-affects-the-number-of-daily-flights"><i class="fa fa-check"></i><b>9.2.2</b> What affects the number of daily flights?</a></li>
<li class="chapter" data-level="9.2.3" data-path="model-building.html"><a href="model-building.html#exercises-3"><i class="fa fa-check"></i><b>9.2.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="many-models.html"><a href="many-models.html"><i class="fa fa-check"></i><b>10</b> Many Models</a><ul>
<li class="chapter" data-level="10.1" data-path="many-models.html"><a href="many-models.html#introduction-15"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="many-models.html"><a href="many-models.html#gapminder"><i class="fa fa-check"></i><b>10.2</b> Gapminder</a><ul>
<li class="chapter" data-level="10.2.1" data-path="many-models.html"><a href="many-models.html#exercise-1-62"><i class="fa fa-check"></i><b>10.2.1</b> Exercise 1</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="many-models.html"><a href="many-models.html#creating-list-columns"><i class="fa fa-check"></i><b>10.3</b> Creating list-columns</a><ul>
<li class="chapter" data-level="10.3.1" data-path="many-models.html"><a href="many-models.html#exercises-4"><i class="fa fa-check"></i><b>10.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="many-models.html"><a href="many-models.html#simplifying-list-columns"><i class="fa fa-check"></i><b>10.4</b> Simplifying list-columns</a><ul>
<li class="chapter" data-level="10.4.1" data-path="many-models.html"><a href="many-models.html#exercises-5"><i class="fa fa-check"></i><b>10.4.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Communicate</b></span></li>
<li class="chapter" data-level="11" data-path="communicate-intro.html"><a href="communicate-intro.html"><i class="fa fa-check"></i><b>11</b> Introduction</a></li>
<li class="chapter" data-level="12" data-path="r-markdown.html"><a href="r-markdown.html"><i class="fa fa-check"></i><b>12</b> R Markdown</a><ul>
<li class="chapter" data-level="12.1" data-path="r-markdown.html"><a href="r-markdown.html#r-markdown-basics"><i class="fa fa-check"></i><b>12.1</b> R Markdown Basics</a><ul>
<li class="chapter" data-level="12.1.1" data-path="r-markdown.html"><a href="r-markdown.html#exercises-6"><i class="fa fa-check"></i><b>12.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="r-markdown.html"><a href="r-markdown.html#text-formatting-with-r-markdown"><i class="fa fa-check"></i><b>12.2</b> Text formatting with R Markdown</a><ul>
<li class="chapter" data-level="12.2.1" data-path="r-markdown.html"><a href="r-markdown.html#exercise-1-66"><i class="fa fa-check"></i><b>12.2.1</b> Exercise 1</a></li>
<li class="chapter" data-level="12.2.2" data-path="r-markdown.html"><a href="r-markdown.html#exercise-2-65"><i class="fa fa-check"></i><b>12.2.2</b> Exercise 2</a></li>
<li class="chapter" data-level="12.2.3" data-path="r-markdown.html"><a href="r-markdown.html#exercise-3-49"><i class="fa fa-check"></i><b>12.2.3</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="r-markdown.html"><a href="r-markdown.html#code-chunks"><i class="fa fa-check"></i><b>12.3</b> Code Chunks</a><ul>
<li class="chapter" data-level="12.3.1" data-path="r-markdown.html"><a href="r-markdown.html#exercise-1-67"><i class="fa fa-check"></i><b>12.3.1</b> Exercise 1</a></li>
<li class="chapter" data-level="12.3.2" data-path="r-markdown.html"><a href="r-markdown.html#exercise-2-66"><i class="fa fa-check"></i><b>12.3.2</b> Exercise 2</a></li>
<li class="chapter" data-level="12.3.3" data-path="r-markdown.html"><a href="r-markdown.html#exercise-3-50"><i class="fa fa-check"></i><b>12.3.3</b> Exercise 3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html"><i class="fa fa-check"></i><b>13</b> Graphics for communication</a><ul>
<li class="chapter" data-level="13.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#introduction-16"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#label"><i class="fa fa-check"></i><b>13.2</b> Label</a><ul>
<li class="chapter" data-level="13.2.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-7"><i class="fa fa-check"></i><b>13.2.1</b> Exercises</a></li>
<li class="chapter" data-level="13.2.2" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercise-3-51"><i class="fa fa-check"></i><b>13.2.2</b> Exercise 3</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#annotations"><i class="fa fa-check"></i><b>13.3</b> Annotations</a><ul>
<li class="chapter" data-level="13.3.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-8"><i class="fa fa-check"></i><b>13.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#scales"><i class="fa fa-check"></i><b>13.4</b> Scales</a><ul>
<li class="chapter" data-level="13.4.1" data-path="graphics-for-communication.html"><a href="graphics-for-communication.html#exercises-9"><i class="fa fa-check"></i><b>13.4.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="r-markdown-formats.html"><a href="r-markdown-formats.html"><i class="fa fa-check"></i><b>14</b> R Markdown Formats</a></li>
<li class="chapter" data-level="15" data-path="r-markdown-workflow.html"><a href="r-markdown-workflow.html"><i class="fa fa-check"></i><b>15</b> R Markdown Workflow</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R for Data Science Solutions</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="many-models" class="section level1">
<h1><span class="header-section-number">10</span> Many Models</h1>
<div id="introduction-15" class="section level2">
<h2><span class="header-section-number">10.1</span> Introduction</h2>
<div class="sourceCode" id="cb553"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb553-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;modelr&quot;</span>)</a>
<a class="sourceLine" id="cb553-2" data-line-number="2"><span class="kw">library</span>(<span class="st">&quot;tidyverse&quot;</span>)</a>
<a class="sourceLine" id="cb553-3" data-line-number="3"><span class="kw">library</span>(<span class="st">&quot;gapminder&quot;</span>)</a></code></pre></div>
</div>
<div id="gapminder" class="section level2">
<h2><span class="header-section-number">10.2</span> Gapminder</h2>
<div id="exercise-1-62" class="section level3 exercise">
<h3><span class="header-section-number">10.2.1</span> Exercise 1</h3>
<p>A linear trend seems to be slightly too simple for the overall trend. Can you do better with a quadratic polynomial? How can you interpret the coefficients of the quadratic? (Hint you might want to transform year so that it has mean zero.)</p>
<p>The following code replicates the analysis in the chapter but the function <code>country_model</code> is replaced with a regression that includes the year squared.</p>
<div class="sourceCode" id="cb554"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb554-1" data-line-number="1">lifeExp <span class="op">~</span><span class="st"> </span><span class="kw">poly</span>(year, <span class="dv">2</span>)</a></code></pre></div>
<div class="sourceCode" id="cb555"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb555-1" data-line-number="1">country_model &lt;-<span class="st"> </span><span class="cf">function</span>(df) {</a>
<a class="sourceLine" id="cb555-2" data-line-number="2">  <span class="kw">lm</span>(lifeExp <span class="op">~</span><span class="st"> </span><span class="kw">poly</span>(year <span class="op">-</span><span class="st"> </span><span class="kw">median</span>(year), <span class="dv">2</span>), <span class="dt">data =</span> df)</a>
<a class="sourceLine" id="cb555-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb555-4" data-line-number="4"></a>
<a class="sourceLine" id="cb555-5" data-line-number="5">by_country &lt;-<span class="st"> </span>gapminder <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb555-6" data-line-number="6"><span class="st">  </span><span class="kw">group_by</span>(country, continent) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb555-7" data-line-number="7"><span class="st">  </span><span class="kw">nest</span>()</a>
<a class="sourceLine" id="cb555-8" data-line-number="8"></a>
<a class="sourceLine" id="cb555-9" data-line-number="9">by_country &lt;-<span class="st"> </span>by_country <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb555-10" data-line-number="10"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">model =</span> <span class="kw">map</span>(data, country_model))</a></code></pre></div>
<div class="sourceCode" id="cb556"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb556-1" data-line-number="1">by_country &lt;-<span class="st"> </span>by_country <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb556-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(</a>
<a class="sourceLine" id="cb556-3" data-line-number="3">    <span class="dt">resids =</span> <span class="kw">map2</span>(data, model, add_residuals)</a>
<a class="sourceLine" id="cb556-4" data-line-number="4">  )</a>
<a class="sourceLine" id="cb556-5" data-line-number="5">by_country</a>
<a class="sourceLine" id="cb556-6" data-line-number="6"><span class="co">#&gt; # A tibble: 142 x 5</span></a>
<a class="sourceLine" id="cb556-7" data-line-number="7"><span class="co">#&gt;   country     continent data              model    resids           </span></a>
<a class="sourceLine" id="cb556-8" data-line-number="8"><span class="co">#&gt;   &lt;fct&gt;       &lt;fct&gt;     &lt;list&gt;            &lt;list&gt;   &lt;list&gt;           </span></a>
<a class="sourceLine" id="cb556-9" data-line-number="9"><span class="co">#&gt; 1 Afghanistan Asia      &lt;tibble [12 × 4]&gt; &lt;S3: lm&gt; &lt;tibble [12 × 5]&gt;</span></a>
<a class="sourceLine" id="cb556-10" data-line-number="10"><span class="co">#&gt; 2 Albania     Europe    &lt;tibble [12 × 4]&gt; &lt;S3: lm&gt; &lt;tibble [12 × 5]&gt;</span></a>
<a class="sourceLine" id="cb556-11" data-line-number="11"><span class="co">#&gt; 3 Algeria     Africa    &lt;tibble [12 × 4]&gt; &lt;S3: lm&gt; &lt;tibble [12 × 5]&gt;</span></a>
<a class="sourceLine" id="cb556-12" data-line-number="12"><span class="co">#&gt; 4 Angola      Africa    &lt;tibble [12 × 4]&gt; &lt;S3: lm&gt; &lt;tibble [12 × 5]&gt;</span></a>
<a class="sourceLine" id="cb556-13" data-line-number="13"><span class="co">#&gt; 5 Argentina   Americas  &lt;tibble [12 × 4]&gt; &lt;S3: lm&gt; &lt;tibble [12 × 5]&gt;</span></a>
<a class="sourceLine" id="cb556-14" data-line-number="14"><span class="co">#&gt; 6 Australia   Oceania   &lt;tibble [12 × 4]&gt; &lt;S3: lm&gt; &lt;tibble [12 × 5]&gt;</span></a>
<a class="sourceLine" id="cb556-15" data-line-number="15"><span class="co">#&gt; # ... with 136 more rows</span></a></code></pre></div>
<div class="sourceCode" id="cb557"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb557-1" data-line-number="1"><span class="kw">unnest</span>(by_country, resids) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb557-2" data-line-number="2"><span class="kw">ggplot</span>(<span class="kw">aes</span>(year, resid)) <span class="op">+</span></a>
<a class="sourceLine" id="cb557-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>(<span class="kw">aes</span>(<span class="dt">group =</span> country), <span class="dt">alpha =</span> <span class="dv">1</span> <span class="op">/</span><span class="st"> </span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb557-4" data-line-number="4"><span class="st">  </span><span class="kw">geom_smooth</span>(<span class="dt">se =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb557-5" data-line-number="5"><span class="co">#&gt; `geom_smooth()` using method = &#39;gam&#39;</span></a></code></pre></div>
<p><img src="many-models_files/figure-html/unnamed-chunk-6-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb558"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb558-1" data-line-number="1">by_country <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb558-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">glance =</span> <span class="kw">map</span>(model, broom<span class="op">::</span>glance)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb558-3" data-line-number="3"><span class="st">  </span><span class="kw">unnest</span>(glance, <span class="dt">.drop =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb558-4" data-line-number="4"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(continent, r.squared)) <span class="op">+</span></a>
<a class="sourceLine" id="cb558-5" data-line-number="5"><span class="st">  </span><span class="kw">geom_jitter</span>(<span class="dt">width =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="many-models_files/figure-html/unnamed-chunk-7-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div id="exercise-2-61" class="section level4">
<h4><span class="header-section-number">10.2.1.1</span> Exercise 2</h4>
<blockquote>
<p>Explore other methods for visualizing the distribution of <span class="math inline">\(R^2\)</span> per continent. You might want to try the <strong>ggbeeswarm</strong> package, which provides similar methods for avoiding overlaps as jitter, but uses deterministic methods.</p>
</blockquote>
<p>See exercise 7.5.1.1.6 for more on <strong>ggbeeswarm</strong></p>
<div class="sourceCode" id="cb559"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb559-1" data-line-number="1"><span class="kw">library</span>(<span class="st">&quot;ggbeeswarm&quot;</span>)</a>
<a class="sourceLine" id="cb559-2" data-line-number="2">by_country <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb559-3" data-line-number="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">glance =</span> <span class="kw">map</span>(model, broom<span class="op">::</span>glance)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb559-4" data-line-number="4"><span class="st">  </span><span class="kw">unnest</span>(glance, <span class="dt">.drop =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb559-5" data-line-number="5"><span class="st">  </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(continent, r.squared)) <span class="op">+</span></a>
<a class="sourceLine" id="cb559-6" data-line-number="6"><span class="st">  </span><span class="kw">geom_beeswarm</span>()</a></code></pre></div>
<p><img src="many-models_files/figure-html/unnamed-chunk-8-1.png" width="70%" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="creating-list-columns" class="section level2">
<h2><span class="header-section-number">10.3</span> Creating list-columns</h2>
<div id="exercises-4" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Exercises</h3>
<div id="exercise-1-63" class="section level4 exercise">
<h4><span class="header-section-number">10.3.1.1</span> Exercise 1</h4>
<blockquote>
<p>List all the functions that you can think of that take a atomic vector and return a list.</p>
</blockquote>
<p>E.g. Many of the <strong>stringr</strong> functions.</p>
</div>
<div id="exercise-2-62" class="section level4 exercise">
<h4><span class="header-section-number">10.3.1.2</span> Exercise 2</h4>
<blockquote>
<p>Brainstorm useful summary functions that, like <code>quantile()</code>, return multiple values.</p>
</blockquote>
<p>Some examples of summary functions that return multiple values are <code>range</code> and <code>fivenum</code>.</p>
</div>
<div id="exercise-3-47" class="section level4 exercise">
<h4><span class="header-section-number">10.3.1.3</span> Exercise 3</h4>
<blockquote>
<p>What’s missing in the following data frame? How does <code>quantile()</code> return that missing piece? Why isn’t that helpful here?</p>
</blockquote>
<div class="sourceCode" id="cb560"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb560-1" data-line-number="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb560-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb560-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">q =</span> <span class="kw">list</span>(<span class="kw">quantile</span>(mpg))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb560-4" data-line-number="4"><span class="st">  </span><span class="kw">unnest</span>()</a>
<a class="sourceLine" id="cb560-5" data-line-number="5"><span class="co">#&gt; # A tibble: 15 x 2</span></a>
<a class="sourceLine" id="cb560-6" data-line-number="6"><span class="co">#&gt;     cyl     q</span></a>
<a class="sourceLine" id="cb560-7" data-line-number="7"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb560-8" data-line-number="8"><span class="co">#&gt; 1    4.  21.4</span></a>
<a class="sourceLine" id="cb560-9" data-line-number="9"><span class="co">#&gt; 2    4.  22.8</span></a>
<a class="sourceLine" id="cb560-10" data-line-number="10"><span class="co">#&gt; 3    4.  26.0</span></a>
<a class="sourceLine" id="cb560-11" data-line-number="11"><span class="co">#&gt; 4    4.  30.4</span></a>
<a class="sourceLine" id="cb560-12" data-line-number="12"><span class="co">#&gt; 5    4.  33.9</span></a>
<a class="sourceLine" id="cb560-13" data-line-number="13"><span class="co">#&gt; 6    6.  17.8</span></a>
<a class="sourceLine" id="cb560-14" data-line-number="14"><span class="co">#&gt; # ... with 9 more rows</span></a></code></pre></div>
<p>The particular quantiles of the values are missing, e.g. <code>0%</code>, <code>25%</code>, <code>50%</code>, <code>75%</code>, <code>100%</code>. <code>quantile()</code> returns these in the names of the vector.</p>
<div class="sourceCode" id="cb561"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb561-1" data-line-number="1"><span class="kw">quantile</span>(mtcars<span class="op">$</span>mpg)</a>
<a class="sourceLine" id="cb561-2" data-line-number="2"><span class="co">#&gt;   0%  25%  50%  75% 100% </span></a>
<a class="sourceLine" id="cb561-3" data-line-number="3"><span class="co">#&gt; 10.4 15.4 19.2 22.8 33.9</span></a></code></pre></div>
<p>Since the <code>unnest</code> function drops the names of the vector, they aren’t useful here.</p>
</div>
<div id="exercise-4-37" class="section level4 exercise">
<h4><span class="header-section-number">10.3.1.4</span> Exercise 4</h4>
<blockquote>
<p>What does this code do?
Why might might it be useful?</p>
</blockquote>
<div class="sourceCode" id="cb562"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb562-1" data-line-number="1">mtcars <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb562-2" data-line-number="2"><span class="st">  </span><span class="kw">group_by</span>(cyl) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb562-3" data-line-number="3"><span class="st">  </span><span class="kw">summarise_each</span>(<span class="kw">funs</span>(list))</a>
<a class="sourceLine" id="cb562-4" data-line-number="4"><span class="co">#&gt; `summarise_each()` is deprecated.</span></a>
<a class="sourceLine" id="cb562-5" data-line-number="5"><span class="co">#&gt; Use `summarise_all()`, `summarise_at()` or `summarise_if()` instead.</span></a>
<a class="sourceLine" id="cb562-6" data-line-number="6"><span class="co">#&gt; To map `funs` over all variables, use `summarise_all()`</span></a>
<a class="sourceLine" id="cb562-7" data-line-number="7"><span class="co">#&gt; # A tibble: 3 x 11</span></a>
<a class="sourceLine" id="cb562-8" data-line-number="8"><span class="co">#&gt;     cyl mpg        disp   hp     drat  wt    qsec  vs    am    gear  carb </span></a>
<a class="sourceLine" id="cb562-9" data-line-number="9"><span class="co">#&gt;   &lt;dbl&gt; &lt;list&gt;     &lt;list&gt; &lt;list&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt; &lt;lis&gt;</span></a>
<a class="sourceLine" id="cb562-10" data-line-number="10"><span class="co">#&gt; 1    4. &lt;dbl [11]&gt; &lt;dbl … &lt;dbl … &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl…</span></a>
<a class="sourceLine" id="cb562-11" data-line-number="11"><span class="co">#&gt; 2    6. &lt;dbl [7]&gt;  &lt;dbl … &lt;dbl … &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl…</span></a>
<a class="sourceLine" id="cb562-12" data-line-number="12"><span class="co">#&gt; 3    8. &lt;dbl [14]&gt; &lt;dbl … &lt;dbl … &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl… &lt;dbl…</span></a></code></pre></div>
<p>It creates a data frame in which each row corresponds to a value of <code>cyl</code>,
and each observation for each column (other than <code>cyl</code>) is a vector of all the values of that column for that value of <code>cyl</code>.
It seems like it should be useful to have all the observations of each variable for each group, but off the top of my head, I can’t think of a specific use for this.
But, it seems that it may do many things that <code>dplyr::do</code> does.</p>
</div>
</div>
</div>
<div id="simplifying-list-columns" class="section level2">
<h2><span class="header-section-number">10.4</span> Simplifying list-columns</h2>
<div id="exercises-5" class="section level3">
<h3><span class="header-section-number">10.4.1</span> Exercises</h3>
<div id="exercise-1-64" class="section level4 exercise">
<h4><span class="header-section-number">10.4.1.1</span> Exercise 1</h4>
<blockquote>
<p>Why might the <code>lengths()</code> function be useful for creating atomic vector columns from list-columns?</p>
</blockquote>
<p>The <code>lengths()</code> function gets the lengths of each element in a list.
It could be useful for testing whether all elements in a list-column are the same length.
You could get the maximum length to determine how many atomic vector columns to create.
It is also a replacement for something like <code>map_int(x, length)</code> or <code>sapply(x, length)</code>.</p>
</div>
<div id="exercise-2-63" class="section level4 exercise">
<h4><span class="header-section-number">10.4.1.2</span> Exercise 2</h4>
<blockquote>
<p>List the most common types of vector found in a data frame.
What makes lists different?</p>
</blockquote>
<p>The common types of vectors in data frames are:</p>
<ul>
<li><code>logical</code></li>
<li><code>numeric</code></li>
<li><code>integer</code></li>
<li><code>character</code></li>
<li><code>factor</code></li>
</ul>
<p>All of the common types of vectors in data frames are atomic. Lists are not atomic (they can contain other lists and other vectors).</p>

</div>
</div>
</div>
</div>



            </section>

          </div>
        </div>
      </div>
<a href="model-building.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="communicate-intro.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/jrnold/r4ds-exercise-solutions/edit/master/many-models.Rmd",
"text": "Edit"
},
"download": ["_main.pdf"],
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
